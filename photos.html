<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Memories ‚ù§Ô∏è</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css">
  <style>
    /* Minimal gallery + lightbox CSS (works even if you haven't edited style.css) */
    .title { text-align:center; margin:18px 0; font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; padding: 18px; max-width:1200px; margin: 0 auto; }
    .gallery-item { position: relative; overflow: hidden; border-radius:12px; box-shadow: 0 8px 20px rgba(0,0,0,0.08); background:#fafafa; cursor:pointer; transition: transform .22s ease, box-shadow .22s ease; }
    .gallery-item img { width:100%; height:100%; object-fit:cover; aspect-ratio:4/5; display:block; transition: transform .35s ease, filter .35s ease; }
    .gallery-item:hover { transform: translateY(-6px); box-shadow: 0 14px 36px rgba(0,0,0,0.12); }
    .gallery-item:hover img { transform: scale(1.06); filter: saturate(1.06); }

    /* caption overlay using data-caption */
    .gallery-item::after {
      content: attr(data-caption);
      position: absolute;
      left: 0; right: 0; bottom: 0;
      padding: 10px 12px;
      background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.62) 100%);
      color: #fff;
      font-size: 14px;
      opacity: 0; transform: translateY(10px);
      transition: opacity .22s ease, transform .22s ease;
      pointer-events: none;
    }
    .gallery-item:hover::after { opacity: 1; transform: translateY(0); }

    .letter-btn { display:block; width:max-content; margin:22px auto; padding:10px 16px; background:#ff6b81; color:#fff; text-decoration:none; border-radius:10px; box-shadow:0 6px 18px rgba(255,107,129,0.18); }

    /* Lightbox */
    .lb-backdrop { position:fixed; inset:0; background: rgba(0,0,0,0.78); display:none; align-items:center; justify-content:center; z-index:9999; padding:20px; }
    .lb-backdrop.open { display:flex; }
    .lb { width:100%; max-width:1100px; max-height:90vh; display:grid; grid-template-columns: 1fr 320px; gap:16px; align-items:start; }
    .lb-image { background:#000; border-radius:12px; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .lb-image img { max-width:100%; max-height:90vh; object-fit:contain; display:block; }
    .lb-meta { background:#fff; padding:14px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.08); color:#222; max-height:86vh; overflow:auto; }
    .lb-controls { display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap; }
    .lb-btn { padding:8px 12px; border-radius:10px; background:#111; color:#fff; border:none; cursor:pointer; }
    .lb-caption { font-size:15px; line-height:1.45; color:#222; margin-bottom:10px; }
    .lb-counter { font-size:13px; color:#666; }
    .lb-close { position:absolute; right:20px; top:18px; background:transparent; color:#fff; border:none; font-size:22px; cursor:pointer; }

    .nav-arrow { position:fixed; top:50%; transform:translateY(-50%); font-size:36px; color:#fff; background:rgba(0,0,0,0.25); width:48px; height:48px; border-radius:50%; border:none; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:10001; }
    .nav-prev { left:18px; }
    .nav-next { right:18px; }

    @media (max-width:900px) { .lb { grid-template-columns: 1fr; } .lb-meta { order:2; max-height:30vh; } .lb-image { order:1; } }
  </style>
</head>
<body>

  <h1 class="title">Your Memories ‚ù§Ô∏è</h1>

  <!-- gallery will be built here -->
  <div class="gallery" id="gallery" aria-live="polite"></div>

  <a class="letter-btn" href="letter.html">Open Letter üíå</a>

  <!-- Lightbox markup -->
  <div class="lb-backdrop" id="lightbox" aria-hidden="true">
    <button class="nav-arrow nav-prev" id="prevBtn" aria-label="Previous">‚Äπ</button>

    <div class="lb" role="dialog" aria-modal="true">
      <div class="lb-image" id="lbImageWrap">
        <img id="lbImage" src="" alt="">
      </div>
      <div class="lb-meta">
        <div class="lb-controls">
          <button class="lb-btn" id="downloadBtn">Download</button>
          <button class="lb-btn" id="slideshowBtn">Start Slideshow</button>
          <button class="lb-btn" id="closeMetaBtn">Close</button>
        </div>
        <div class="lb-caption" id="lbCaption"></div>
        <div class="lb-counter" id="lbCounter"></div>
      </div>
    </div>

    <button class="nav-arrow nav-next" id="nextBtn" aria-label="Next">‚Ä∫</button>
    <button class="lb-close" id="lbClose" aria-label="Close">‚úï</button>
  </div>

  <!-- Gallery builder + lightbox script -->
  <script>
  /* --------- Captions (74 romantic captions) --------- */
  const captions = [
    "The smile that made my heart choose you ‚ù§Ô∏è",
    "Your eyes here‚Ä¶ impossible to forget",
    "My pretty girl looking like magic",
    "This day, my heart fell a little deeper",
    "Your laughter is my favorite sound",
    "The moment I realized you‚Äôre too beautiful for words",
    "Moni in her natural, irresistible glow",
    "That soft smile I never get tired of",
    "Your eyes here‚Ä¶ unfairly perfect",
    "You look like the peace I always needed",
    "Every version of you is beautiful",
    "The kind of beauty that feels like home",
    "Your happiness here makes me happy too",
    "I swear your smile can heal anything",
    "Your heart shows in every picture",
    "Moni, you‚Äôre poetry without trying",
    "The softness in your eyes is my comfort",
    "You look like the wish I whispered quietly",
    "How do you make every picture feel warm?",
    "A moment I never want to forget",
    "Your presence makes everything better",
    "The prettiest girl in the room. Always.",
    "You look like a calm I didn‚Äôt know I needed",
    "The way you carry emotion‚Ä¶ beautiful",
    "Your smile here feels like home",
    "This picture is pure Moni‚Äîsoft and lovely",
    "Your innocence shines here",
    "Jealous Moni is cute, but this Moni is adorable too",
    "You look angelic here",
    "My heart reacts every time I see this",
    "You make the world prettier without trying",
    "Your simplicity is the most attractive thing",
    "This is the Moni I would choose every time",
    "Your warmth is visible even here",
    "Moni being unintentionally breathtaking",
    "A tiny moment, a huge feeling",
    "You don‚Äôt pose; you glow",
    "One picture, a thousand feelings",
    "The Moni who melts my anger",
    "This look‚Ä¶ I remember the feeling it gave me",
    "Pretty is too small a word for you",
    "Your softness is a superpower",
    "Even your silence speaks beautifully",
    "You look like comfort in human form",
    "This smile deserves a museum wall",
    "My emotional, adorable Moni ‚ù§Ô∏è",
    "You look like someone my heart cannot let go",
    "Every small detail of you is lovable",
    "This Moni = heart stolen again",
    "Your long pretty hair makes this perfect",
    "Your eyes shine differently here",
    "This picture feels like a hug",
    "You in your natural beauty ‚Äî my favorite",
    "If love had a face, it would look like this",
    "You look priceless here",
    "This is the Moni who makes my heartbeat skip",
    "You glow in ways you don‚Äôt realize",
    "My forever favorite person",
    "Your presence changes the whole frame",
    "Every angle of you is beautiful",
    "This picture feels like a soft memory",
    "You look like the calm after a storm",
    "My heart feels safe looking at this",
    "Your smile could fix any bad day",
    "This Moni is my weakness",
    "Your beauty here is so gentle",
    "The Moni I want in every version of my life",
    "You‚Äôre the prettiest part of my days",
    "This picture holds a whole emotion",
    "I love this moment more than you know",
    "Moni, you‚Äôre the reason the word 'beautiful' exists",
    "My heart chose you here all over again",
    "The girl I want in every universe ‚ù§Ô∏è"
  ];

  const IMAGE_COUNT = 74;
  const gallery = document.getElementById('gallery');

  function buildGallery() {
    if (!gallery) return;
    gallery.innerHTML = '';
    for (let i = 1; i <= IMAGE_COUNT; i++) {
      const cap = captions[i-1] || `Memory ${i}`;
      const item = document.createElement('div');
      item.className = 'gallery-item';
      item.setAttribute('data-caption', cap);

      const img = document.createElement('img');
      img.src = `img${i}.jpg`;
      img.alt = cap;
      img.loading = 'lazy';
      // open lightbox on click
      item.addEventListener('click', ()=> openLightbox(i-1));
      item.appendChild(img);
      gallery.appendChild(item);
    }
  }

  /* ---------- Lightbox logic ---------- */
  const lightbox = document.getElementById('lightbox');
  const lbImage = document.getElementById('lbImage');
  const lbCaption = document.getElementById('lbCaption');
  const lbCounter = document.getElementById('lbCounter');
  const downloadBtn = document.getElementById('downloadBtn');
  const slideshowBtn = document.getElementById('slideshowBtn');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const lbClose = document.getElementById('lbClose');

  let currentIndex = 0;
  let slideshowInterval = null;

  function openLightbox(index) {
    currentIndex = index;
    updateLightbox();
    lightbox.classList.add('open');
    lightbox.setAttribute('aria-hidden','false');
    // prevent background scroll
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    lightbox.classList.remove('open');
    lightbox.setAttribute('aria-hidden','true');
    stopSlideshow();
    document.body.style.overflow = '';
  }

  function updateLightbox() {
    const idx = ((currentIndex % IMAGE_COUNT) + IMAGE_COUNT) % IMAGE_COUNT;
    const src = `img${idx+1}.jpg`;
    const caption = captions[idx] || `Memory ${idx+1}`;
    lbImage.src = src;
    lbImage.alt = caption;
    lbCaption.textContent = caption;
    lbCounter.textContent = `${idx+1} / ${IMAGE_COUNT}`;
    downloadBtn.onclick = () => downloadImage(src);
  }

  function prevImage() {
    currentIndex = (currentIndex - 1 + IMAGE_COUNT) % IMAGE_COUNT;
    updateLightbox();
  }

  function nextImage() {
    currentIndex = (currentIndex + 1) % IMAGE_COUNT;
    updateLightbox();
  }

  function downloadImage(src){
    const a = document.createElement('a');
    a.href = src;
    a.download = src;
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

  /* slideshow controls */
  function startSlideshow(){
    slideshowBtn.textContent = 'Stop Slideshow';
    slideshowInterval = setInterval(()=> nextImage(), 3000);
  }
  function stopSlideshow(){
    slideshowBtn.textContent = 'Start Slideshow';
    if (slideshowInterval) { clearInterval(slideshowInterval); slideshowInterval = null; }
  }

  /* keyboard */
  document.addEventListener('keydown', (e) => {
    if (!lightbox.classList.contains('open')) return;
    if (e.key === 'ArrowLeft') prevImage();
    if (e.key === 'ArrowRight') nextImage();
    if (e.key === 'Escape') closeLightbox();
  });

  /* clicks */
  prevBtn.addEventListener('click', prevImage);
  nextBtn.addEventListener('click', nextImage);
  lbClose.addEventListener('click', closeLightbox);
  document.getElementById('closeMetaBtn').addEventListener('click', closeLightbox);
  slideshowBtn.addEventListener('click', () => {
    if (slideshowInterval) stopSlideshow(); else startSlideshow();
  });

  /* backdrop click close */
  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  /* touch swipe */
  let touchStartX = 0;
  let touchEndX = 0;
  const lbImgEl = document.getElementById('lbImage');
  lbImgEl.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; });
  lbImgEl.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    if (touchEndX - touchStartX > 50) prevImage();
    if (touchStartX - touchEndX > 50) nextImage();
  });

  /* init */
  document.addEventListener('DOMContentLoaded', () => {
    buildGallery();
  });

  </script>

  <!-- keep your main script included (cache-busted so updates load) -->
  <script src="script.js?v=4"></script>
</body>
</html>
